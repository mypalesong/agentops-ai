"use strict";(globalThis.webpackChunkagentops_docs=globalThis.webpackChunkagentops_docs||[]).push([[2338],{8453(e,s,n){n.d(s,{R:()=>a,x:()=>r});var i=n(6540);const t={},o=i.createContext(t);function a(e){const s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(o.Provider,{value:s},e.children)}},8669(e,s,n){n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"core-concepts/sessions","title":"Sessions","description":"Understanding and managing sessions in AgentOps","source":"@site/docs/core-concepts/sessions.md","sourceDirName":"core-concepts","slug":"/core-concepts/sessions","permalink":"/docusaurus-guide-3/docs/core-concepts/sessions","draft":false,"unlisted":false,"editUrl":"https://github.com/agentops/agentops-docs/tree/main/docs/core-concepts/sessions.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Sessions","description":"Understanding and managing sessions in AgentOps"},"sidebar":"docsSidebar","previous":{"title":"Architecture","permalink":"/docusaurus-guide-3/docs/core-concepts/architecture"},"next":{"title":"Events","permalink":"/docusaurus-guide-3/docs/core-concepts/events"}}');var t=n(4848),o=n(8453);const a={sidebar_position:3,title:"Sessions",description:"Understanding and managing sessions in AgentOps"},r="Sessions",d={},l=[{value:"What is a Session?",id:"what-is-a-session",level:2},{value:"Session Lifecycle",id:"session-lifecycle",level:2},{value:"Starting Sessions",id:"starting-sessions",level:2},{value:"Automatic Start",id:"automatic-start",level:3},{value:"Manual Start",id:"manual-start",level:3},{value:"Session Configuration",id:"session-configuration",level:2},{value:"Tags",id:"tags",level:3},{value:"Config",id:"config",level:3},{value:"Ending Sessions",id:"ending-sessions",level:2},{value:"End States",id:"end-states",level:3},{value:"End State Guidelines",id:"end-state-guidelines",level:3},{value:"Automatic End",id:"automatic-end",level:3},{value:"Multiple Sessions",id:"multiple-sessions",level:2},{value:"Sequential Sessions",id:"sequential-sessions",level:3},{value:"Concurrent Sessions",id:"concurrent-sessions",level:3},{value:"Session Inheritance",id:"session-inheritance",level:2},{value:"Session Object API",id:"session-object-api",level:2},{value:"Properties",id:"properties",level:3},{value:"Methods",id:"methods",level:3},{value:"Session Metadata",id:"session-metadata",level:2},{value:"Session in Dashboard",id:"session-in-dashboard",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Meaningful Tags",id:"1-use-meaningful-tags",level:3},{value:"2. Always End Sessions",id:"2-always-end-sessions",level:3},{value:"3. Provide End State Reasons",id:"3-provide-end-state-reasons",level:3},{value:"4. Store Relevant Config",id:"4-store-relevant-config",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Session Not Recording Events",id:"session-not-recording-events",level:3},{value:"Session Ends Unexpectedly",id:"session-ends-unexpectedly",level:3},{value:"Missing Sessions in Dashboard",id:"missing-sessions-in-dashboard",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"sessions",children:"Sessions"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=1200&h=300&fit=crop",alt:"Sessions"})}),"\n",(0,t.jsxs)(s.p,{children:["A ",(0,t.jsx)(s.strong,{children:"Session"})," is the fundamental unit of observability in AgentOps. It represents a complete execution of your AI agent, capturing all events, metrics, and outcomes from start to finish."]}),"\n",(0,t.jsx)(s.h2,{id:"what-is-a-session",children:"What is a Session?"}),"\n",(0,t.jsx)(s.p,{children:'Think of a session as a "recording" of your agent\'s execution. When you start a session, AgentOps begins capturing:'}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"All LLM API calls"}),"\n",(0,t.jsx)(s.li,{children:"Tool/function invocations"}),"\n",(0,t.jsx)(s.li,{children:"Custom events you log"}),"\n",(0,t.jsx)(s.li,{children:"Errors and exceptions"}),"\n",(0,t.jsx)(s.li,{children:"Performance metrics"}),"\n",(0,t.jsx)(s.li,{children:"Cost calculations"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"session-lifecycle",children:"Session Lifecycle"}),"\n",(0,t.jsx)(s.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e Created: agentops.start_session()\n    Created --\x3e Running: Initialize\n    Running --\x3e Running: Record Events\n    Running --\x3e Ended: session.end()\n    Ended --\x3e [*]\n\n    state Running {\n        [*] --\x3e Active\n        Active --\x3e EventCapture: LLM Call\n        Active --\x3e EventCapture: Tool Use\n        Active --\x3e EventCapture: Custom Event\n        EventCapture --\x3e Active\n    }\n\n    note right of Running: Events recorded<br/>Metrics calculated"}),"\n",(0,t.jsx)(s.h2,{id:"starting-sessions",children:"Starting Sessions"}),"\n",(0,t.jsx)(s.h3,{id:"automatic-start",children:"Automatic Start"}),"\n",(0,t.jsx)(s.p,{children:"By default, AgentOps starts a session automatically:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'import agentops\n\n# Session starts automatically on init\nagentops.init(api_key="your-api-key")\n\n# Your agent code - all events captured in the auto-started session\nresponse = client.chat.completions.create(...)\n\n# End the session when done\nagentops.end_session(end_state="Success")\n'})}),"\n",(0,t.jsx)(s.h3,{id:"manual-start",children:"Manual Start"}),"\n",(0,t.jsx)(s.p,{children:"For more control, disable auto-start and manage sessions manually:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'import agentops\n\n# Disable auto-start\nagentops.init(api_key="your-api-key", auto_start_session=False)\n\n# Start session manually\nsession = agentops.start_session(\n    tags=["production", "customer-support"],\n    config={"user_id": "user-123"}\n)\n\n# Your agent code\n# ...\n\n# End session\nsession.end(end_state="Success")\n'})}),"\n",(0,t.jsx)(s.h2,{id:"session-configuration",children:"Session Configuration"}),"\n",(0,t.jsx)(s.h3,{id:"tags",children:"Tags"}),"\n",(0,t.jsx)(s.p,{children:"Tags help you filter and organize sessions:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'session = agentops.start_session(tags=[\n    "production",        # Environment\n    "gpt-4",            # Model used\n    "customer-support", # Use case\n    "v2.1.0",           # Application version\n])\n'})}),"\n",(0,t.jsx)(s.h3,{id:"config",children:"Config"}),"\n",(0,t.jsx)(s.p,{children:"Store arbitrary configuration data with your session:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'session = agentops.start_session(\n    tags=["analytics"],\n    config={\n        "user_id": "user-456",\n        "experiment_id": "exp-789",\n        "feature_flags": {\n            "new_model": True,\n            "streaming": False\n        },\n        "input_source": "api",\n        "priority": "high"\n    }\n)\n'})}),"\n",(0,t.jsx)(s.h2,{id:"ending-sessions",children:"Ending Sessions"}),"\n",(0,t.jsx)(s.h3,{id:"end-states",children:"End States"}),"\n",(0,t.jsx)(s.p,{children:"Sessions must be ended with a state indicating the outcome:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# Success - Agent completed its goal\nsession.end(end_state="Success")\n\n# Fail - Agent failed to complete its goal\nsession.end(end_state="Fail", end_state_reason="API rate limit exceeded")\n\n# Indeterminate - Outcome unclear\nsession.end(end_state="Indeterminate", end_state_reason="User abandoned")\n'})}),"\n",(0,t.jsx)(s.h3,{id:"end-state-guidelines",children:"End State Guidelines"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"State"}),(0,t.jsx)(s.th,{children:"When to Use"}),(0,t.jsx)(s.th,{children:"Example"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"Success"})}),(0,t.jsx)(s.td,{children:"Agent achieved its goal"}),(0,t.jsx)(s.td,{children:"Query answered, task completed"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"Fail"})}),(0,t.jsx)(s.td,{children:"Agent could not achieve goal"}),(0,t.jsx)(s.td,{children:"Error occurred, invalid input"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"Indeterminate"})}),(0,t.jsx)(s.td,{children:"Outcome cannot be determined"}),(0,t.jsx)(s.td,{children:"User left, partial completion"})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"automatic-end",children:"Automatic End"}),"\n",(0,t.jsx)(s.p,{children:"Sessions can be configured to end automatically:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# End on program exit (default behavior)\nagentops.init(api_key="your-api-key")\n\n# Disable auto-end to manage manually\nagentops.init(\n    api_key="your-api-key",\n    skip_auto_end_session=True\n)\n'})}),"\n",(0,t.jsx)(s.h2,{id:"multiple-sessions",children:"Multiple Sessions"}),"\n",(0,t.jsx)(s.h3,{id:"sequential-sessions",children:"Sequential Sessions"}),"\n",(0,t.jsx)(s.p,{children:"Run multiple sessions one after another:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'import agentops\n\nagentops.init(api_key="your-api-key", auto_start_session=False)\n\ntasks = ["task1", "task2", "task3"]\n\nfor task in tasks:\n    session = agentops.start_session(tags=[task])\n\n    # Process task\n    result = process_task(task)\n\n    # End with appropriate state\n    if result.success:\n        session.end(end_state="Success")\n    else:\n        session.end(end_state="Fail", end_state_reason=result.error)\n'})}),"\n",(0,t.jsx)(s.h3,{id:"concurrent-sessions",children:"Concurrent Sessions"}),"\n",(0,t.jsx)(s.p,{children:"Run multiple sessions simultaneously (advanced):"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'import agentops\nfrom concurrent.futures import ThreadPoolExecutor\n\nagentops.init(api_key="your-api-key", auto_start_session=False)\n\ndef process_with_session(task_id):\n    # Each thread gets its own session\n    session = agentops.start_session(tags=[f"task-{task_id}"])\n\n    try:\n        result = process_task(task_id)\n        session.end(end_state="Success")\n        return result\n    except Exception as e:\n        session.end(end_state="Fail", end_state_reason=str(e))\n        raise\n\nwith ThreadPoolExecutor(max_workers=3) as executor:\n    futures = [executor.submit(process_with_session, i) for i in range(5)]\n'})}),"\n",(0,t.jsx)(s.h2,{id:"session-inheritance",children:"Session Inheritance"}),"\n",(0,t.jsx)(s.p,{children:"Continue a session across process boundaries:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# Process 1: Start session\nsession = agentops.start_session(tags=["distributed"])\nsession_id = session.session_id\n\n# Pass session_id to another process...\n\n# Process 2: Continue session\nagentops.init(\n    api_key="your-api-key",\n    inherited_session_id=session_id\n)\n\n# Events are now recorded to the same session\n'})}),"\n",(0,t.jsx)(s.h2,{id:"session-object-api",children:"Session Object API"}),"\n",(0,t.jsx)(s.h3,{id:"properties",children:"Properties"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'session = agentops.start_session(tags=["example"])\n\n# Access session properties\nprint(session.session_id)    # Unique ID (UUID)\nprint(session.tags)          # Session tags\nprint(session.config)        # Configuration dict\nprint(session.is_running)    # Boolean\n'})}),"\n",(0,t.jsx)(s.h3,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# Record an event to this session\nsession.record(agentops.Event(\n    event_type="custom",\n    params={"key": "value"}\n))\n\n# Add tags after creation\nsession.add_tags(["additional", "tags"])\n\n# End the session\nsession.end(\n    end_state="Success",\n    end_state_reason="All tasks completed"\n)\n'})}),"\n",(0,t.jsx)(s.h2,{id:"session-metadata",children:"Session Metadata"}),"\n",(0,t.jsx)(s.p,{children:"AgentOps automatically captures environment metadata:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# Automatically captured:\n{\n    "host_env": {\n        "os": "Linux",\n        "os_version": "5.4.0",\n        "python_version": "3.11.0",\n        "sdk_version": "0.3.0",\n        "hostname": "agent-server-1",\n        "runtime": "CPython"\n    }\n}\n'})}),"\n",(0,t.jsx)(s.p,{children:"Opt out of environment data collection:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'agentops.init(\n    api_key="your-api-key",\n    env_data_opt_out=True\n)\n'})}),"\n",(0,t.jsx)(s.h2,{id:"session-in-dashboard",children:"Session in Dashboard"}),"\n",(0,t.jsx)(s.p,{children:"In the AgentOps dashboard, you can:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"View all sessions"})," - List with filters and search"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Session details"})," - Full event timeline"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Session replay"})," - Step through events"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Metrics"})," - Cost, latency, token usage"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Compare sessions"})," - Side-by-side analysis"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(s.h3,{id:"1-use-meaningful-tags",children:"1. Use Meaningful Tags"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# Good - descriptive, filterable\nsession = agentops.start_session(tags=[\n    "prod",\n    "customer-support",\n    "gpt-4-turbo",\n    "v2.3.1"\n])\n\n# Bad - generic, not useful\nsession = agentops.start_session(tags=["test"])\n'})}),"\n",(0,t.jsx)(s.h3,{id:"2-always-end-sessions",children:"2. Always End Sessions"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'try:\n    session = agentops.start_session(tags=["important"])\n    # Agent code\n    session.end(end_state="Success")\nexcept Exception as e:\n    session.end(end_state="Fail", end_state_reason=str(e))\n    raise\nfinally:\n    # Ensure session ends even on unexpected errors\n    if session.is_running:\n        session.end(end_state="Indeterminate")\n'})}),"\n",(0,t.jsx)(s.h3,{id:"3-provide-end-state-reasons",children:"3. Provide End State Reasons"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# Good - helpful for debugging\nsession.end(\n    end_state="Fail",\n    end_state_reason="OpenAI API returned 429: Rate limit exceeded"\n)\n\n# Bad - no context\nsession.end(end_state="Fail")\n'})}),"\n",(0,t.jsx)(s.h3,{id:"4-store-relevant-config",children:"4. Store Relevant Config"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'session = agentops.start_session(\n    config={\n        # Include data useful for analysis\n        "user_tier": "premium",\n        "input_length": len(user_input),\n        "model_config": {\n            "temperature": 0.7,\n            "max_tokens": 1000\n        }\n    }\n)\n'})}),"\n",(0,t.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(s.h3,{id:"session-not-recording-events",children:"Session Not Recording Events"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# Ensure session is started before making LLM calls\nagentops.init(api_key="your-api-key")\nsession = agentops.start_session()  # Start first\n\n# Now make LLM calls\nresponse = client.chat.completions.create(...)\n'})}),"\n",(0,t.jsx)(s.h3,{id:"session-ends-unexpectedly",children:"Session Ends Unexpectedly"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# Disable auto-end if you need manual control\nagentops.init(\n    api_key="your-api-key",\n    skip_auto_end_session=True\n)\n'})}),"\n",(0,t.jsx)(s.h3,{id:"missing-sessions-in-dashboard",children:"Missing Sessions in Dashboard"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# Ensure session is properly ended\nsession.end(end_state="Success")\n\n# Or use context manager for guaranteed cleanup\nwith agentops.Session(tags=["example"]) as session:\n    # Your code here\n    pass  # Session auto-ends\n'})}),"\n",(0,t.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/docs/core-concepts/events",children:"Events"})," - Learn about event types"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/docs/core-concepts/agents",children:"Agents"})," - Track multi-agent systems"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/docs/features/monitoring",children:"Monitoring"})," - Use the dashboard effectively"]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);