"use strict";(globalThis.webpackChunkagentops_docs=globalThis.webpackChunkagentops_docs||[]).push([[7266],{102(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"features/cost-tracking","title":"Cost Tracking","description":"Monitor and optimize your LLM API costs","source":"@site/docs/features/cost-tracking.md","sourceDirName":"features","slug":"/features/cost-tracking","permalink":"/docusaurus-guide-3/docs/features/cost-tracking","draft":false,"unlisted":false,"editUrl":"https://github.com/agentops/agentops-docs/tree/main/docs/features/cost-tracking.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Cost Tracking","description":"Monitor and optimize your LLM API costs"},"sidebar":"docsSidebar","previous":{"title":"Session Replay","permalink":"/docusaurus-guide-3/docs/features/replay"},"next":{"title":"Overview","permalink":"/docusaurus-guide-3/docs/integrations/overview"}}');var i=s(4848),o=s(8453);const r={sidebar_position:6,title:"Cost Tracking",description:"Monitor and optimize your LLM API costs"},l="Cost Tracking",a={},c=[{value:"Automatic Cost Calculation",id:"automatic-cost-calculation",level:2},{value:"Cost Dashboard",id:"cost-dashboard",level:2},{value:"Overview",id:"overview",level:3},{value:"Pricing Models",id:"pricing-models",level:2},{value:"Supported Providers",id:"supported-providers",level:3},{value:"Pricing Calculation",id:"pricing-calculation",level:3},{value:"Budget Management",id:"budget-management",level:2},{value:"Setting Budgets",id:"setting-budgets",level:3},{value:"Budget Alerts",id:"budget-alerts",level:3},{value:"Cost Analytics",id:"cost-analytics",level:2},{value:"By Model",id:"by-model",level:3},{value:"By Session Tag",id:"by-session-tag",level:3},{value:"By Time Period",id:"by-time-period",level:3},{value:"Cost Optimization",id:"cost-optimization",level:2},{value:"Identify Expensive Sessions",id:"identify-expensive-sessions",level:3},{value:"Model Comparison",id:"model-comparison",level:3},{value:"Cost Reduction Strategies",id:"cost-reduction-strategies",level:3},{value:"1. Use Appropriate Models",id:"1-use-appropriate-models",level:4},{value:"2. Optimize Prompts",id:"2-optimize-prompts",level:4},{value:"3. Implement Caching",id:"3-implement-caching",level:4},{value:"4. Set Token Limits",id:"4-set-token-limits",level:4},{value:"Cost Reporting",id:"cost-reporting",level:2},{value:"Generate Reports",id:"generate-reports",level:3},{value:"Scheduled Reports",id:"scheduled-reports",level:3},{value:"API Access",id:"api-access",level:2},{value:"Query Costs",id:"query-costs",level:3},{value:"Cost Events",id:"cost-events",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Set Realistic Budgets",id:"1-set-realistic-budgets",level:3},{value:"2. Monitor Cost Anomalies",id:"2-monitor-cost-anomalies",level:3},{value:"3. Regular Cost Reviews",id:"3-regular-cost-reviews",level:3},{value:"4. Track ROI",id:"4-track-roi",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"cost-tracking",children:"Cost Tracking"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=1200&h=300&fit=crop",alt:"Cost Tracking"})}),"\n",(0,i.jsx)(n.p,{children:"AgentOps provides comprehensive cost tracking to help you monitor, analyze, and optimize your LLM API spending."}),"\n",(0,i.jsx)(n.mermaid,{value:'flowchart LR\n    subgraph Tracking["Cost Tracking Flow"]\n        A[LLM Call] --\x3e B[Token Count]\n        B --\x3e C[Price Lookup]\n        C --\x3e D[Cost Calculation]\n        D --\x3e E[Aggregation]\n    end\n\n    subgraph Analytics["Cost Analytics"]\n        E --\x3e F[By Model]\n        E --\x3e G[By Session]\n        E --\x3e H[By Tag]\n        E --\x3e I[Over Time]\n    end\n\n    subgraph Actions["Actions"]\n        F --\x3e J[Alerts]\n        G --\x3e K[Budgets]\n        H --\x3e L[Reports]\n        I --\x3e M[Optimization]\n    end\n\n    style A fill:#0066FF,stroke:#3399FF,color:#fff\n    style D fill:#22C55E,stroke:#16A34A,color:#fff\n    style J fill:#EF4444,stroke:#DC2626,color:#fff'}),"\n",(0,i.jsx)(n.h2,{id:"automatic-cost-calculation",children:"Automatic Cost Calculation"}),"\n",(0,i.jsx)(n.p,{children:"AgentOps automatically calculates costs for all LLM calls based on current provider pricing:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import agentops\nfrom openai import OpenAI\n\nagentops.init(api_key="your-api-key")\nclient = OpenAI()\n\n# Cost is automatically calculated and tracked\nresponse = client.chat.completions.create(\n    model="gpt-4",\n    messages=[{"role": "user", "content": "Hello!"}]\n)\n\n# View in dashboard:\n# - Model: gpt-4\n# - Input tokens: 10\n# - Output tokens: 25\n# - Cost: $0.00125\n'})}),"\n",(0,i.jsx)(n.h2,{id:"cost-dashboard",children:"Cost Dashboard"}),"\n",(0,i.jsx)(n.h3,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Cost Dashboard                                    [This Month \u25be]       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  Total Cost  \u2502 \u2502   Sessions   \u2502 \u2502  Avg/Session \u2502 \u2502    Budget    \u2502   \u2502\n\u2502  \u2502   $892.45    \u2502 \u2502    8,432     \u2502 \u2502    $0.106    \u2502 \u2502   75% used   \u2502   \u2502\n\u2502  \u2502   +12.1%     \u2502 \u2502   +15.2%     \u2502 \u2502    -2.8%     \u2502 \u2502   $1,200     \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                          \u2502\n\u2502  Cost by Model                                                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 gpt-4            $542.30  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588  61%       \u2502 \u2502\n\u2502  \u2502 gpt-4-turbo      $215.80  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588                   24%       \u2502 \u2502\n\u2502  \u2502 claude-3-opus    $98.45   \u2588\u2588\u2588\u2588\u2588                         11%       \u2502 \u2502\n\u2502  \u2502 gpt-3.5-turbo    $35.90   \u2588\u2588                            4%        \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                          \u2502\n\u2502  Daily Cost Trend                                                        \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  $50\u2502              \u2584\u2584                                              \u2502 \u2502\n\u2502  \u2502     \u2502         \u2584\u2584  \u2588\u2588\u2588\u2588  \u2584\u2584                                        \u2502 \u2502\n\u2502  \u2502  $30\u2502    \u2584\u2584  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588  \u2584\u2584                                 \u2502 \u2502\n\u2502  \u2502     \u2502  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588                             \u2502 \u2502\n\u2502  \u2502  $10\u2502\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588                         \u2502 \u2502\n\u2502  \u2502   $0\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500                        \u2502 \u2502\n\u2502  \u2502        1    5    10   15   20   25   30                           \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h2,{id:"pricing-models",children:"Pricing Models"}),"\n",(0,i.jsx)(n.h3,{id:"supported-providers",children:"Supported Providers"}),"\n",(0,i.jsx)(n.p,{children:"AgentOps tracks costs for all major providers:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Provider"}),(0,i.jsx)(n.th,{children:"Models"}),(0,i.jsx)(n.th,{children:"Pricing Updated"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"OpenAI"}),(0,i.jsx)(n.td,{children:"GPT-4, GPT-3.5, etc."}),(0,i.jsx)(n.td,{children:"Real-time"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Anthropic"}),(0,i.jsx)(n.td,{children:"Claude 3, Claude 2"}),(0,i.jsx)(n.td,{children:"Real-time"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Google"}),(0,i.jsx)(n.td,{children:"Gemini Pro, etc."}),(0,i.jsx)(n.td,{children:"Real-time"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Mistral"}),(0,i.jsx)(n.td,{children:"All models"}),(0,i.jsx)(n.td,{children:"Real-time"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Cohere"}),(0,i.jsx)(n.td,{children:"Command, Embed"}),(0,i.jsx)(n.td,{children:"Real-time"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"pricing-calculation",children:"Pricing Calculation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Example pricing calculation\npricing = {\n    "gpt-4": {\n        "input": 0.03,   # per 1K tokens\n        "output": 0.06   # per 1K tokens\n    },\n    "gpt-4-turbo": {\n        "input": 0.01,\n        "output": 0.03\n    },\n    "gpt-3.5-turbo": {\n        "input": 0.0005,\n        "output": 0.0015\n    }\n}\n\n# Cost = (input_tokens * input_price + output_tokens * output_price) / 1000\n# For gpt-4 with 1000 input and 500 output tokens:\n# Cost = (1000 * 0.03 + 500 * 0.06) / 1000 = $0.06\n'})}),"\n",(0,i.jsx)(n.h2,{id:"budget-management",children:"Budget Management"}),"\n",(0,i.jsx)(n.h3,{id:"setting-budgets",children:"Setting Budgets"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# Budget configuration in dashboard\nbudgets:\n  - name: "Monthly Total"\n    amount: 1200\n    period: monthly\n    alerts:\n      - threshold: 75%\n        channels: [email]\n      - threshold: 90%\n        channels: [email, slack]\n      - threshold: 100%\n        channels: [email, slack, pagerduty]\n\n  - name: "Daily Limit"\n    amount: 50\n    period: daily\n    action: warn  # or "pause"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"budget-alerts",children:"Budget Alerts"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Programmatic budget monitoring\nfrom agentops import Client\n\nclient = Client(api_key="your-api-key")\n\n# Get current budget status\nbudget = client.get_budget_status()\nprint(f"Monthly budget: ${budget.limit}")\nprint(f"Current spend: ${budget.current}")\nprint(f"Remaining: ${budget.remaining}")\nprint(f"Percentage used: {budget.percentage_used}%")\n\n# Set up alert webhook\nclient.set_budget_alert(\n    threshold=0.9,  # 90%\n    webhook_url="https://your-webhook.com/alerts"\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"cost-analytics",children:"Cost Analytics"}),"\n",(0,i.jsx)(n.h3,{id:"by-model",children:"By Model"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Get cost breakdown by model\ncosts = client.get_cost_analytics(\n    period="30d",\n    group_by="model"\n)\n\nfor model_cost in costs:\n    print(f"{model_cost[\'model\']}: ${model_cost[\'total\']:.2f}")\n    print(f"  Calls: {model_cost[\'call_count\']}")\n    print(f"  Avg cost/call: ${model_cost[\'avg_cost\']:.4f}")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"by-session-tag",children:"By Session Tag"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Cost by use case\ncosts = client.get_cost_analytics(\n    period="30d",\n    group_by="tag"\n)\n\n# Results:\n# customer-support: $342.50\n# data-analysis: $245.80\n# content-generation: $198.45\n# code-review: $105.70\n'})}),"\n",(0,i.jsx)(n.h3,{id:"by-time-period",children:"By Time Period"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Daily cost trend\ndaily_costs = client.get_cost_analytics(\n    period="30d",\n    group_by="day"\n)\n\nfor day in daily_costs:\n    print(f"{day[\'date\']}: ${day[\'cost\']:.2f}")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"cost-optimization",children:"Cost Optimization"}),"\n",(0,i.jsx)(n.h3,{id:"identify-expensive-sessions",children:"Identify Expensive Sessions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Find most expensive sessions\nexpensive_sessions = client.get_sessions(\n    sort_by="cost",\n    order="desc",\n    limit=10\n)\n\nfor session in expensive_sessions:\n    print(f"Session {session.session_id}: ${session.total_cost:.2f}")\n    print(f"  Model: {session.primary_model}")\n    print(f"  Tokens: {session.total_tokens}")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"model-comparison",children:"Model Comparison"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Compare model costs for similar tasks\ncomparison = client.compare_model_costs(\n    sessions_filter={"tags": ["customer-support"]},\n    models=["gpt-4", "gpt-4-turbo", "gpt-3.5-turbo"]\n)\n\n# Results:\n# gpt-4: avg $0.15/session, 94% success\n# gpt-4-turbo: avg $0.08/session, 93% success\n# gpt-3.5-turbo: avg $0.02/session, 88% success\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cost-reduction-strategies",children:"Cost Reduction Strategies"}),"\n",(0,i.jsx)(n.h4,{id:"1-use-appropriate-models",children:"1. Use Appropriate Models"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Route simple queries to cheaper models\ndef select_model(query_complexity):\n    if query_complexity == "simple":\n        return "gpt-3.5-turbo"  # $0.002/1K tokens\n    elif query_complexity == "moderate":\n        return "gpt-4-turbo"    # $0.02/1K tokens\n    else:\n        return "gpt-4"          # $0.06/1K tokens\n'})}),"\n",(0,i.jsx)(n.h4,{id:"2-optimize-prompts",children:"2. Optimize Prompts"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Track prompt length vs cost\nagentops.record(Event(\n    event_type="prompt_optimization",\n    params={\n        "original_length": len(original_prompt),\n        "optimized_length": len(optimized_prompt),\n        "savings_percent": (1 - len(optimized_prompt)/len(original_prompt)) * 100\n    }\n))\n'})}),"\n",(0,i.jsx)(n.h4,{id:"3-implement-caching",children:"3. Implement Caching"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Cache common responses\nfrom functools import lru_cache\n\n@lru_cache(maxsize=1000)\ndef get_cached_response(query_hash):\n    # Check cache before calling LLM\n    pass\n\n# Track cache hit rates\nagentops.record(Event(\n    event_type="cache_stats",\n    params={\n        "hits": cache_hits,\n        "misses": cache_misses,\n        "savings": estimated_savings\n    }\n))\n'})}),"\n",(0,i.jsx)(n.h4,{id:"4-set-token-limits",children:"4. Set Token Limits"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Prevent runaway costs\nresponse = client.chat.completions.create(\n    model="gpt-4",\n    messages=messages,\n    max_tokens=500  # Limit output\n)\n\n# Track truncations\nif response.choices[0].finish_reason == "length":\n    agentops.record(Event(\n        event_type="token_limit_hit",\n        params={"max_tokens": 500}\n    ))\n'})}),"\n",(0,i.jsx)(n.h2,{id:"cost-reporting",children:"Cost Reporting"}),"\n",(0,i.jsx)(n.h3,{id:"generate-reports",children:"Generate Reports"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Generate cost report\nreport = client.generate_cost_report(\n    period="monthly",\n    format="pdf",\n    include=[\n        "summary",\n        "by_model",\n        "by_tag",\n        "trends",\n        "recommendations"\n    ]\n)\n\n# Email report\nreport.send_to(["finance@company.com"])\n'})}),"\n",(0,i.jsx)(n.h3,{id:"scheduled-reports",children:"Scheduled Reports"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# Automated reporting\nreports:\n  - name: "Weekly Cost Summary"\n    schedule: "0 9 * * MON"\n    recipients: [team@company.com]\n    content:\n      - weekly_total\n      - comparison_to_budget\n      - top_cost_drivers\n      - optimization_suggestions\n'})}),"\n",(0,i.jsx)(n.h2,{id:"api-access",children:"API Access"}),"\n",(0,i.jsx)(n.h3,{id:"query-costs",children:"Query Costs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from agentops import Client\n\nclient = Client(api_key="your-api-key")\n\n# Get total cost for period\ntotal = client.get_total_cost(\n    start_date="2024-01-01",\n    end_date="2024-01-31"\n)\n\n# Get cost for specific sessions\nsession_costs = client.get_session_costs(\n    session_ids=["sess_abc123", "sess_def456"]\n)\n\n# Get real-time cost\ncurrent_cost = client.get_current_cost(period="today")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cost-events",children:"Cost Events"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Custom cost tracking for non-LLM expenses\nagentops.record(Event(\n    event_type="external_cost",\n    params={\n        "service": "google-search-api",\n        "cost": 0.005,\n        "currency": "USD"\n    }\n))\n'})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"1-set-realistic-budgets",children:"1. Set Realistic Budgets"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Calculate budget based on expected usage\nexpected_sessions_per_day = 1000\navg_cost_per_session = 0.10\nbuffer = 1.2  # 20% buffer\n\ndaily_budget = expected_sessions_per_day * avg_cost_per_session * buffer\nmonthly_budget = daily_budget * 30\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-monitor-cost-anomalies",children:"2. Monitor Cost Anomalies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Alert on unusual spending\nclient.set_anomaly_detection(\n    metric="hourly_cost",\n    sensitivity="medium",\n    channels=["slack"]\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-regular-cost-reviews",children:"3. Regular Cost Reviews"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Daily"}),": Check for anomalies"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Weekly"}),": Review trends and efficiency"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Monthly"}),": Full cost analysis and optimization"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-track-roi",children:"4. Track ROI"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Link costs to business value\nagentops.record(Event(\n    event_type="business_outcome",\n    params={\n        "session_id": session.session_id,\n        "session_cost": session.total_cost,\n        "value_generated": 50.00,  # e.g., ticket resolved\n        "roi": (50.00 - session.total_cost) / session.total_cost\n    }\n))\n'})}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/features/analytics",children:"Analytics"})," - Deeper cost analysis"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/features/monitoring",children:"Monitoring"})," - Real-time cost monitoring"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/guides/best-practices",children:"Best Practices"})," - Cost optimization tips"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>r,x:()=>l});var t=s(6540);const i={},o=t.createContext(i);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);