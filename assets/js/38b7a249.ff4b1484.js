"use strict";(globalThis.webpackChunkagentops_docs=globalThis.webpackChunkagentops_docs||[]).push([[7983],{6870(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"features/replay","title":"Session Replay","description":"Replay agent sessions step by step","source":"@site/docs/features/replay.md","sourceDirName":"features","slug":"/features/replay","permalink":"/docusaurus-guide-3/docs/features/replay","draft":false,"unlisted":false,"editUrl":"https://github.com/agentops/agentops-docs/tree/main/docs/features/replay.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Session Replay","description":"Replay agent sessions step by step"},"sidebar":"docsSidebar","previous":{"title":"Debugging","permalink":"/docusaurus-guide-3/docs/features/debugging"},"next":{"title":"Cost Tracking","permalink":"/docusaurus-guide-3/docs/features/cost-tracking"}}');var i=s(4848),r=s(8453);const a={sidebar_position:5,title:"Session Replay",description:"Replay agent sessions step by step"},l="Session Replay",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Using Session Replay",id:"using-session-replay",level:2},{value:"Access from Dashboard",id:"access-from-dashboard",level:3},{value:"Replay Controls",id:"replay-controls",level:3},{value:"Replay Views",id:"replay-views",level:2},{value:"Timeline View",id:"timeline-view",level:3},{value:"Event Detail View",id:"event-detail-view",level:3},{value:"State View",id:"state-view",level:3},{value:"Features",id:"features",level:2},{value:"Search Within Session",id:"search-within-session",level:3},{value:"Compare Sessions",id:"compare-sessions",level:3},{value:"Export Replay",id:"export-replay",level:3},{value:"Programmatic Replay",id:"programmatic-replay",level:2},{value:"Fetch Session Events",id:"fetch-session-events",level:3},{value:"Replay in Code",id:"replay-in-code",level:3},{value:"Replay for Debugging",id:"replay-for-debugging",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Add Context Events",id:"1-add-context-events",level:3},{value:"2. Log State Changes",id:"2-log-state-changes",level:3},{value:"3. Include Input/Output",id:"3-include-inputoutput",level:3},{value:"4. Mark Important Events",id:"4-mark-important-events",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"session-replay",children:"Session Replay"})}),"\n",(0,i.jsx)(n.p,{children:"Session Replay allows you to step through any agent session event by event, providing complete visibility into agent behavior."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"Session Replay captures:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Every LLM call with full prompts and responses"}),"\n",(0,i.jsx)(n.li,{children:"Tool invocations and results"}),"\n",(0,i.jsx)(n.li,{children:"Custom events and state changes"}),"\n",(0,i.jsx)(n.li,{children:"Timing information between events"}),"\n",(0,i.jsx)(n.li,{children:"Errors and their context"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"using-session-replay",children:"Using Session Replay"}),"\n",(0,i.jsx)(n.h3,{id:"access-from-dashboard",children:"Access from Dashboard"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Navigate to ",(0,i.jsx)(n.strong,{children:"Sessions"})," in the AgentOps dashboard"]}),"\n",(0,i.jsx)(n.li,{children:"Click on any session to open it"}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Replay"})," to enter replay mode"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"replay-controls",children:"Replay Controls"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Control"}),(0,i.jsx)(n.th,{children:"Action"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Play"})}),(0,i.jsx)(n.td,{children:"Auto-advance through events"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Pause"})}),(0,i.jsx)(n.td,{children:"Stop auto-advance"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Step Forward"})}),(0,i.jsx)(n.td,{children:"Move to next event"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Step Back"})}),(0,i.jsx)(n.td,{children:"Move to previous event"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Jump to Start"})}),(0,i.jsx)(n.td,{children:"Go to first event"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Jump to End"})}),(0,i.jsx)(n.td,{children:"Go to last event"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Speed"})}),(0,i.jsx)(n.td,{children:"Adjust playback speed (0.5x - 4x)"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"replay-views",children:"Replay Views"}),"\n",(0,i.jsx)(n.h3,{id:"timeline-view",children:"Timeline View"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Timeline\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n0s              2.5s                                  8s\n\nEvents:\n[Session Start] \u2192 [LLM Call] \u2192 [Tool: search] \u2192 [LLM Call] \u2192 [Session End]\n     0s            0.5s          2.5s            4.0s         8.0s\n"})}),"\n",(0,i.jsx)(n.h3,{id:"event-detail-view",children:"Event Detail View"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Event: LLM Call                                              2 of 5    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                          \u2502\n\u2502 Timestamp: 2024-01-15T10:30:02.500Z                                     \u2502\n\u2502 Duration: 1.5s                                                          \u2502\n\u2502 Model: gpt-4                                                            \u2502\n\u2502                                                                          \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502 PROMPT                                                              \u2502 \u2502\n\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502\n\u2502 \u2502 [system]                                                            \u2502 \u2502\n\u2502 \u2502 You are a helpful assistant that searches for information.         \u2502 \u2502\n\u2502 \u2502                                                                      \u2502 \u2502\n\u2502 \u2502 [user]                                                              \u2502 \u2502\n\u2502 \u2502 Find the latest news about artificial intelligence.                \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                          \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502 RESPONSE                                                            \u2502 \u2502\n\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502\n\u2502 \u2502 I\'ll search for the latest AI news for you.                        \u2502 \u2502\n\u2502 \u2502                                                                      \u2502 \u2502\n\u2502 \u2502 [Function Call: search_web]                                        \u2502 \u2502\n\u2502 \u2502 Arguments: {"query": "artificial intelligence news 2024"}          \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                          \u2502\n\u2502 Tokens: 45 input, 32 output                                             \u2502\n\u2502 Cost: $0.0231                                                           \u2502\n\u2502                                                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,i.jsx)(n.h3,{id:"state-view",children:"State View"}),"\n",(0,i.jsx)(n.p,{children:"Track state changes throughout the session:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'State Timeline\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                                                          \u2502\n\u2502 Event 1: Session Start                                                   \u2502\n\u2502 \u251c\u2500 state: "initialized"                                                  \u2502\n\u2502 \u2514\u2500 context: []                                                          \u2502\n\u2502                                                                          \u2502\n\u2502 Event 2: LLM Call                                                        \u2502\n\u2502 \u251c\u2500 state: "processing"                                                   \u2502\n\u2502 \u2514\u2500 context: [user_message]                                              \u2502\n\u2502                                                                          \u2502\n\u2502 Event 3: Tool Call                                                       \u2502\n\u2502 \u251c\u2500 state: "searching"                                                    \u2502\n\u2502 \u2514\u2500 context: [user_message, assistant_response]                          \u2502\n\u2502                                                                          \u2502\n\u2502 Event 4: LLM Call                                                        \u2502\n\u2502 \u251c\u2500 state: "responding"                                                   \u2502\n\u2502 \u2514\u2500 context: [user_message, assistant_response, search_results]          \u2502\n\u2502                                                                          \u2502\n\u2502 Event 5: Session End                                                     \u2502\n\u2502 \u251c\u2500 state: "completed"                                                    \u2502\n\u2502 \u2514\u2500 end_state: "Success"                                                 \u2502\n\u2502                                                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,i.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,i.jsx)(n.h3,{id:"search-within-session",children:"Search Within Session"}),"\n",(0,i.jsx)(n.p,{children:"Find specific content in a session:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'Search: "error"\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Results (2 matches)                                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Event 4: LLM Response                               \u2502\n\u2502 "...I encountered an error while..."                \u2502\n\u2502                                                      \u2502\n\u2502 Event 6: Custom Event (error_logged)               \u2502\n\u2502 "ValidationError: Invalid input format"            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,i.jsx)(n.h3,{id:"compare-sessions",children:"Compare Sessions"}),"\n",(0,i.jsx)(n.p,{children:"View two sessions side by side:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Session: sess_abc123       \u2502 \u2502 Session: sess_def456       \u2502\n\u2502 Status: Success            \u2502 \u2502 Status: Failed             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                            \u2502 \u2502                            \u2502\n\u2502 Event 1: Session Start     \u2502 \u2502 Event 1: Session Start     \u2502\n\u2502 Event 2: LLM Call          \u2502 \u2502 Event 2: LLM Call          \u2502\n\u2502 Event 3: Tool: search  \u2190\u2500\u2500\u2500\u253c\u2500\u253c\u2192 Event 3: Tool: search     \u2502\n\u2502 Event 4: LLM Call          \u2502 \u2502 Event 4: Error \u274c          \u2502\n\u2502 Event 5: Session End \u2713     \u2502 \u2502 Event 5: Session End \u2717     \u2502\n\u2502                            \u2502 \u2502                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h3,{id:"export-replay",children:"Export Replay"}),"\n",(0,i.jsx)(n.p,{children:"Export session replay for sharing:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from agentops import Client\n\nclient = Client(api_key="your-api-key")\n\n# Export replay data\nreplay_data = client.export_replay(\n    session_id="sess_abc123",\n    format="json"\n)\n\n# Save to file\nwith open("session_replay.json", "w") as f:\n    json.dump(replay_data, f, indent=2)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"programmatic-replay",children:"Programmatic Replay"}),"\n",(0,i.jsx)(n.h3,{id:"fetch-session-events",children:"Fetch Session Events"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from agentops import Client\n\nclient = Client(api_key="your-api-key")\n\n# Get session with all events\nsession = client.get_session("sess_abc123", include_events=True)\n\n# Iterate through events\nfor event in session.events:\n    print(f"[{event.timestamp}] {event.event_type}")\n    print(f"  Params: {event.params}")\n    print()\n'})}),"\n",(0,i.jsx)(n.h3,{id:"replay-in-code",children:"Replay in Code"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Recreate session flow for testing\ndef replay_session(session_id):\n    session = client.get_session(session_id, include_events=True)\n\n    for event in session.events:\n        if event.event_type == "llm":\n            print(f"LLM Call ({event.params[\'model\']}):")\n            print(f"  Input: {event.params[\'prompt\']}")\n            print(f"  Output: {event.params[\'completion\']}")\n\n        elif event.event_type == "tool":\n            print(f"Tool Call ({event.params[\'tool_name\']}):")\n            print(f"  Input: {event.params[\'input\']}")\n            print(f"  Output: {event.params[\'output\']}")\n\n        elif event.event_type == "error":\n            print(f"Error: {event.params[\'error_type\']}")\n            print(f"  Details: {event.params[\'details\']}")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"replay-for-debugging",children:"Replay for Debugging"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def debug_failed_session(session_id):\n    """Analyze a failed session step by step."""\n    session = client.get_session(session_id, include_events=True)\n\n    print(f"Session: {session.session_id}")\n    print(f"End State: {session.end_state}")\n    print(f"End Reason: {session.end_state_reason}")\n    print("\\n--- Event Replay ---\\n")\n\n    for i, event in enumerate(session.events):\n        print(f"Step {i + 1}: {event.event_type}")\n        print(f"Time: {event.timestamp}")\n\n        if event.event_type == "error":\n            print("\u26a0\ufe0f  ERROR DETECTED")\n            print(f"Type: {event.params.get(\'error_type\')}")\n            print(f"Details: {event.params.get(\'details\')}")\n            print("\\n--- Events Before Error ---")\n\n            # Show previous events for context\n            for j in range(max(0, i - 3), i):\n                prev = session.events[j]\n                print(f"  [{prev.event_type}] {prev.params}")\n\n        print()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"1-add-context-events",children:"1. Add Context Events"}),"\n",(0,i.jsx)(n.p,{children:"Make replay more useful by adding context:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Before making decisions, log the reasoning\nagentops.record(Event(\n    event_type="agent_reasoning",\n    params={\n        "input": user_query,\n        "options_considered": ["search", "calculate", "respond"],\n        "selected": "search",\n        "reasoning": "User asked about current events"\n    }\n))\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2-log-state-changes",children:"2. Log State Changes"}),"\n",(0,i.jsx)(n.p,{children:"Track important state transitions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'class StatefulAgent:\n    def set_state(self, new_state):\n        old_state = self.state\n        self.state = new_state\n\n        agentops.record(Event(\n            event_type="state_change",\n            params={\n                "from": old_state,\n                "to": new_state,\n                "reason": self.last_action\n            }\n        ))\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-include-inputoutput",children:"3. Include Input/Output"}),"\n",(0,i.jsx)(n.p,{children:"Always include inputs and outputs for replay clarity:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'@tool(name="process_data")\ndef process_data(data: dict) -> dict:\n    agentops.record(Event(\n        event_type="tool_input",\n        params={"tool": "process_data", "input": data}\n    ))\n\n    result = do_processing(data)\n\n    agentops.record(Event(\n        event_type="tool_output",\n        params={"tool": "process_data", "output": result}\n    ))\n\n    return result\n'})}),"\n",(0,i.jsx)(n.h3,{id:"4-mark-important-events",children:"4. Mark Important Events"}),"\n",(0,i.jsx)(n.p,{children:"Highlight key moments in the session:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Mark important decisions\nagentops.record(Event(\n    event_type="important_decision",\n    params={\n        "description": "Escalating to human support",\n        "reason": "Complex technical issue detected",\n        "confidence": 0.95\n    }\n))\n'})}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/features/debugging",children:"Debugging"})," - Debug with replay"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/features/logging",children:"Logging"})," - Improve replay data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/features/analytics",children:"Analytics"})," - Analyze replay patterns"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>l});var t=s(6540);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);