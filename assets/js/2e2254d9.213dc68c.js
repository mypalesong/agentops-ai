"use strict";(globalThis.webpackChunkagentops_docs=globalThis.webpackChunkagentops_docs||[]).push([[6242],{3194(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>i});const a=JSON.parse('{"id":"api/callbacks","title":"Callbacks","description":"Callback handlers API reference","source":"@site/docs/api/callbacks.md","sourceDirName":"api","slug":"/api/callbacks","permalink":"/docusaurus-guide-3/docs/api/callbacks","draft":false,"unlisted":false,"editUrl":"https://github.com/agentops/agentops-docs/tree/main/docs/api/callbacks.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Callbacks","description":"Callback handlers API reference"},"sidebar":"apiSidebar","previous":{"title":"Decorators","permalink":"/docusaurus-guide-3/docs/api/decorators"},"next":{"title":"Configuration","permalink":"/docusaurus-guide-3/docs/api/configuration"}}');var t=s(4848),l=s(8453);const o={sidebar_position:5,title:"Callbacks",description:"Callback handlers API reference"},r="Callbacks",d={},i=[{value:"Event Hooks",id:"event-hooks",level:2},{value:"add_event_hook()",id:"add_event_hook",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Example",id:"example",level:3},{value:"Filtering Events",id:"filtering-events",level:3},{value:"Session Callbacks",id:"session-callbacks",level:2},{value:"on_session_start",id:"on_session_start",level:3},{value:"on_session_end",id:"on_session_end",level:3},{value:"Framework Callbacks",id:"framework-callbacks",level:2},{value:"LangChain Handler",id:"langchain-handler",level:3},{value:"Custom Handler",id:"custom-handler",level:3},{value:"Example Usage",id:"example-usage",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"callbacks",children:"Callbacks"})}),"\n",(0,t.jsx)(n.p,{children:"Callback handlers for custom event processing."}),"\n",(0,t.jsx)(n.h2,{id:"event-hooks",children:"Event Hooks"}),"\n",(0,t.jsx)(n.h3,{id:"add_event_hook",children:"add_event_hook()"}),"\n",(0,t.jsx)(n.p,{children:"Add a hook to process events before sending."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"agentops.add_event_hook(callback: Callable[[Event], Event]) -> None\n"})}),"\n",(0,t.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"callback"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Callable"})}),(0,t.jsx)(n.td,{children:"Function that receives and returns an Event"})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'def my_hook(event):\n    """Process event before sending."""\n    # Add custom data\n    event.params["custom_field"] = "value"\n\n    # Optionally modify event\n    if event.event_type == "llm":\n        event.params["tagged"] = True\n\n    return event\n\nagentops.add_event_hook(my_hook)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"filtering-events",children:"Filtering Events"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'def filter_hook(event):\n    """Filter out certain events."""\n    # Return None to skip event\n    if event.event_type == "debug":\n        return None\n    return event\n\nagentops.add_event_hook(filter_hook)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"session-callbacks",children:"Session Callbacks"}),"\n",(0,t.jsx)(n.h3,{id:"on_session_start",children:"on_session_start"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'def on_start(session):\n    print(f"Session started: {session.session_id}")\n\nagentops.on_session_start(on_start)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"on_session_end",children:"on_session_end"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'def on_end(session):\n    print(f"Session ended: {session.end_state}")\n\nagentops.on_session_end(on_end)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"framework-callbacks",children:"Framework Callbacks"}),"\n",(0,t.jsx)(n.h3,{id:"langchain-handler",children:"LangChain Handler"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from agentops.langchain import AgentOpsHandler\n\nhandler = AgentOpsHandler()\n\nllm = ChatOpenAI(callbacks=[handler])\n"})}),"\n",(0,t.jsx)(n.h3,{id:"custom-handler",children:"Custom Handler"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'class CustomHandler:\n    def on_llm_start(self, serialized, prompts, **kwargs):\n        agentops.record(Event(\n            event_type="llm_start",\n            params={"prompts": prompts}\n        ))\n\n    def on_llm_end(self, response, **kwargs):\n        agentops.record(Event(\n            event_type="llm_end",\n            params={"response": str(response)}\n        ))\n'})}),"\n",(0,t.jsx)(n.h2,{id:"example-usage",children:"Example Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import agentops\n\ndef logging_hook(event):\n    """Log all events."""\n    print(f"Event: {event.event_type}")\n    print(f"Params: {event.params}")\n    return event\n\ndef enrichment_hook(event):\n    """Add metadata to events."""\n    event.params["environment"] = "production"\n    event.params["version"] = "1.0.0"\n    return event\n\n# Add multiple hooks\nagentops.add_event_hook(logging_hook)\nagentops.add_event_hook(enrichment_hook)\n\nagentops.init(api_key="your-api-key")\n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>r});var a=s(6540);const t={},l=a.createContext(t);function o(e){const n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),a.createElement(l.Provider,{value:n},e.children)}}}]);